generator client {
    provider      = "prisma-client-js"
    output        = "../node_modules/.prisma/client"
    binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Order {
    id          String    @id
    user_id     String
    order_date  DateTime  @default(now())
    status      String    @default("pending")
    total_price Float
    total_qty   Int
    created_at  DateTime  @default(now())
    updated_at  DateTime  @default(now()) @updatedAt
    deleted_at  DateTime?
    order_items OrderItem[]
    @@map("orders")
}

model OrderItem {
    order_id   String
    product_id String
    qty        Int
    price      Float
    created_at DateTime @default(now())
    updated_at DateTime @default(now()) @updatedAt
    deleted_at DateTime?
    order      Order   @relation(fields: [order_id], references: [id])

    @@id([order_id, product_id])
    @@map("order_items")
}